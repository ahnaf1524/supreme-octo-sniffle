<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grade Calculator</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body>
  <div class="container my-5">
    <h2 class="mb-4">Grade Point Calculator</h2>

    <div class="mb-3 row">
      <label for="subjectCount" class="col-sm-3 col-form-label"
        >Total Subjects:</label
      >
      <div class="col-sm-3">
        <input
          type="number"
          class="form-control"
          id="subjectCount"
          min="1"
          placeholder="Enter number"
        />
      </div>
      <div class="col-sm-3">
        <button class="btn btn-primary" id="generateBtn">Generate Inputs</button>
      </div>
    </div>

    <form id="gradesForm"></form>

    <button
      class="btn btn-success mt-3"
      id="calculateBtn"
      style="display: none"
    >
      Calculate Average
    </button>

    <div id="result" class="mt-4"></div>
  </div>

  <script>
    const gradePoints = {
      'A+': 5.00,
      'A': 4.00,
      'A-': 3.50,
      'B': 3.00,
      'C': 2.00,
      'F': 0.00,
    };

    const finalGrade = (avg) => {
      if (avg >= 5.00) return 'A+';
      if (avg >= 4.00) return 'A';
      if (avg >= 3.50) return 'A-';
      if (avg >= 3.00) return 'B';
      if (avg >= 2.00) return 'C';
      return 'F (Fail)';
    };

    const generateInputs = () => {
      const count = parseInt(document.getElementById('subjectCount').value);
      const form = document.getElementById('gradesForm');
      const calculateBtn = document.getElementById('calculateBtn');
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = '';
      form.innerHTML = '';

      if (isNaN(count) || count <= 0) {
        alert('Please enter a valid number of subjects.');
        return;
      }

      for (let i = 1; i <= count; i++) {
        const div = document.createElement('div');
        div.className = 'mb-3 row align-items-center';

        const label = document.createElement('label');
        label.className = 'col-sm-3 col-form-label';
        label.innerText = `Grade for Subject ${i}:`;

        const selectDiv = document.createElement('div');
        selectDiv.className = 'col-sm-3';

        const select = document.createElement('select');
        select.className = 'form-select';
        select.name = `grade${i}`;
        select.required = true;

        const grades = ['A+', 'A', 'A-', 'B', 'C', 'F'];
        grades.forEach((grade) => {
          const option = document.createElement('option');
          option.value = grade;
          option.innerText = grade;
          select.appendChild(option);
        });

        selectDiv.appendChild(select);
        div.appendChild(label);
        div.appendChild(selectDiv);
        form.appendChild(div);
      }

      calculateBtn.style.display = 'inline-block';
    };

    const calculateAverage = () => {
      const form = document.getElementById('gradesForm');
      const formData = new FormData(form);
      const grades = Array.from(formData.values());
      let totalPoints = 0;

      grades.forEach((grade) => {
        totalPoints += gradePoints[grade];
      });

      const avg = totalPoints / grades.length;
      const final = finalGrade(avg);

      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `
        <h4>Results:</h4>
        <p><strong>Total Points:</strong> ${totalPoints.toFixed(2)}</p>
        <p><strong>Average Point:</strong> ${avg.toFixed(2)}</p>
        <p><strong>Final Grade:</strong> ${final}</p>
      `;
    };

    document.getElementById('generateBtn').addEventListener('click', generateInputs);
    document.getElementById('calculateBtn').addEventListener('click', calculateAverage);
  </script>
</body>
</html>
